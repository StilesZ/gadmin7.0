{include file='common/head' /}
<title>基本设置</title>
</head>
<body>
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-body">
            <form class="layui-form" action='' method="post" id="form-article-add">
                <fieldset class="layui-elem-field layui-field-title" style="margin-top: 10px;">
                    <legend>安全管理&系统防火墙</legend>
                </fieldset>
                <label class="layui-form-label">防火墙开关</label>
                <div class="layui-input-block">
                    <input type="hidden" name="waf_open"  value="0">
                    <input type="checkbox" {eq name='w.waf_open' value="1"}checked{/eq} name="waf_open" lay-skin="switch" lay-filter="switchTest" lay-text="ON|OFF" value="1">
                    * 如果执行保存被防火墙阻止,需要到后台关闭防火墙。目录位置： /config/syswaf.php
                </div>
                <table class="layui-table" style="padding: 30px">
                    <colgroup>
                        <col width="5%">
                        <col width="90%">
                        <col width="5%">
                    </colgroup>
                    <thead>
                    <tr>
                        <th>id</th>
                        <th>正则匹配</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody id="waf">
                    {volist name='w.waf' id='k'}
                    <tr>
                        <td>{$key}</td>
                        <td><input type="text" name="waf[]" value="{$k}" class="layui-input"></td>
                        <td>
                            <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" id="waf_del"><i class="layui-icon layui-icon-delete"></i></button>
                        </td>
                    </tr>
                    {/volist}
                    </tbody>
                </table>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button type="button" class="layui-btn layui-btn-normal waf-add">增加</button>
                        <button type="submit"  class="layui-btn layui-btn-warm">保存</button>
                    </div>
                </div>
            </form>
    </div>
</div>
</div>
{include file='common/footer' /}
<script>
    layui.use(['form', 'jquery'], function () {
        var jquery = layui.jquery;
        jquery('.waf-add').on('click', function () {
            var html = '<tr>';
            html += '<td><input type="text" class="layui-input" name="waf[]"><\/td>';
            html += '<td><button type="button" class="layui-btn layui-btn-primary layui-btn-sm" id="waf_del"><i class="layui-icon layui-icon-delete"><\/i><\/button><\/td>';
            html += '<\/tr>';
            jquery('#waf').append(html);
        })
        // 删除自定义变量
        jquery('body').on('click', '#waf_del', function () {
            jquery(this).parents('tr').remove();
        })
    });
</script>
</body>
</html>




